" vimrc

" Vundle {{{
" Use Vim settings, rather than Vi settings (much better!).
" This must be first, because it changes other options as a side effect.
set nocompatible

filetype off

set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()

" better indent Python
Plugin 'hynek/vim-python-pep8-indent'

" plugin manager
Plugin 'gmarik/Vundle.vim'

" completion
Plugin 'Valloric/YouCompleteMe'

" colorschemes
Plugin 'jnurmine/Zenburn'
Plugin 'endel/vim-github-colorscheme'
Plugin 'morhetz/gruvbox'
Plugin 'freeo/vim-kalisi'

" Python folding
Plugin 'tmhedberg/SimpylFold'

" complete pairs (e.g. parentheses)
Plugin 'cohama/lexima.vim'


call vundle#end()
" }}}

" Settings {{{
" set the colorscheme
colorscheme kalisi
set background=light

" So backspace works as expected in OSX
set backspace=2

" display line numbers
set number

" line number, column number, virtual column number, and relative position in
" status line
set ruler

" shows info about the current command, e.g. shows number of lines selected
" when using ctrl-V
set showcmd

" no more backup files (files with ~ extension)
set nobackup

" no swapfile
set noswapfile

" display unprintible characters like $ at end of line
set list

" you can have unwritten changes in a file and open a new file
set hidden

" search highlighting on by default
set hlsearch

filetype plugin indent on
syntax enable

set virtualedit=all
set wildmenu
set scrolloff=999
set cursorline cursorcolumn
set showmatch
set incsearch
set hlsearch
set foldenable
set modelines=1
set t_Co=256


" }}}

" Mappings  {{{
" misc {{{

" indent one space at a time regardless of shiftwidth
vnoremap <C-l> :s/^/ /<CR>gv
vnoremap <C-h> :s/^\s//<CR>gv

" this allows you to save a file as the root user even if you didn't
" open the file with root privileges.
cmap w!! w !sudo tee % >/dev/null

" map window navigation commands to shorthand versions.
nnoremap ,h <C-w>h
nnoremap ,j <C-w>j
nnoremap ,k <C-w>k
nnoremap ,l <C-w>l

" switch behavior of j/gj and k/gk
nnoremap j gj
nnoremap k gk
nnoremap gj j
nnoremap gk k

" source the vimrc
nnoremap ,so :so $MYVIMRC<CR>zv

" edit my vimrc
nnoremap ,ev :e $MYVIMRC<CR>

" quick mapping for toggling search highlight
nnoremap <Leader>nhl :nohlsearch<CR>
nnoremap <Leader>hl :set hlsearch<CR>

" toggle fold with spacebar
nnoremap <space> za
" }}}
" }}}

" FT specific settings {{{

" python {{{
" PEP8
let python_highlight_all=1
au BufNewFile,BufRead *.py
    \ set tabstop=4 |
    \ set softtabstop=4 |
    \ set shiftwidth=4 |
    \ set textwidth=79 |
    \ set expandtab |
    \ set autoindent |
    \ set fileformat=unix |
    \ set formatprg=par\ -w 79

au BufRead,BufNewFile *.py,*.pyw,*.c,*.h 
    \ highlight BadWhitespace ctermbg=red guibg=darkred |
    \ match BadWhitespace /\s\+$/

" }}}

" }}}

" plugin settings {{{
"
" YCM config {{{
"

let g:ycm_autoclose_preview_window_after_completion=1
map <leader>g  :YcmCompleter GoToDefinitionElseDeclaration<CR>

"}}}
" Python folding config {{{
"

let g:SimpylFold_docstring_preview = 1

"}}}
"

" vim:foldmethod=marker:foldlevel=0
